(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{156:function(e,t,n){},158:function(e,t,n){},202:function(e,t,n){},229:function(e,t,n){},231:function(e,t,n){},232:function(e,t,n){},237:function(e,t,n){},246:function(e,t,n){"use strict";n.r(t);var c=n(4),r=n(0),a=n.n(r),i=n(16),s=n.n(i),o=n(30),u=n(55),l=n(47),j=n(56),d=n(114),p=n(1),b="@CITY/SET_GEOLOCATION",h="@CITY/SET_CITY_WEATHER",O="@CITY/REMOVE_CITY",f="@CITY/SET_LOADING",y="@CITY/SET_ERROR",x={currentGeolocation:null,cityList:[],loading:!1,error:null},m="@WEATHER/SET_CITY",v="@WEATHER/SET_FORECAST",g="@WEATHER/SET_LOADING",w="@WEATHER/SET_FORECAST_LOADING",_={city:null,forecast:null,loading:!1,forecastLoading:!1,error:null},E=Object(j.combineReducers)({city:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:x,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return Object(p.a)(Object(p.a)({},e),{},{currentGeolocation:t.payload});case f:return Object(p.a)(Object(p.a)({},e),{},{loading:t.payload});case h:var n=e.cityList.findIndex((function(e){return e.city===t.payload.city}));if(n<0)return Object(p.a)(Object(p.a)({},e),{},{cityList:[t.payload].concat(Object(l.a)(e.cityList))});var c=Object(l.a)(e.cityList);return c.splice(n,1),c.unshift(t.payload),Object(p.a)(Object(p.a)({},e),{},{cityList:c});case O:var r=e.cityList.filter((function(e){return e.city!==t.payload}));return Object(p.a)(Object(p.a)({},e),{},{cityList:r});case y:return Object(p.a)(Object(p.a)({},e),{},{error:t.payload});default:return e}},weather:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case m:return Object(p.a)(Object(p.a)({},e),{},{city:t.payload});case v:return Object(p.a)(Object(p.a)({},e),{},{forecast:t.payload});case g:return Object(p.a)(Object(p.a)({},e),{},{loading:t.payload});case w:return Object(p.a)(Object(p.a)({},e),{},{forecastLoading:t.payload});default:return e}}}),T=[n(115).a],C=Object(j.createStore)(E,Object(d.composeWithDevTools)(j.applyMiddleware.apply(void 0,Object(l.a)(T)))),N=n(25),S=(n(155),n(156),function(e){var t=e.children;return Object(c.jsx)("div",{className:"layout",children:t})}),k=n(6),I=function(e){return e.city.currentGeolocation},L=function(e){return e.city.cityList},W=function(e){return e.city.loading},H=function(e){return e.city.error},D=function(e){return e.weather.city},R=function(e){return e.weather.loading},A=function(e){return e.weather.forecast},Y=function(e){return e.weather.forecastLoading},F=n(31),G=n.n(F),M=n(43),P=function(e){return{city:e.name,temp:e.main.temp,pressure:e.main.pressure,humidity:e.main.humidity,windSpeed:e.wind.speed,sunrise:e.sys.sunrise,sunset:e.sys.sunset,description:e.weather[0].description,icon:e.weather[0].icon,lat:e.coord.lat,lon:e.coord.lon}},z=function(e){return{day:e.dt,temp:e.temp.day,pressure:e.pressure,humidity:e.humidity,windSpeed:e.wind_speed,sunrise:e.sunrise,sunset:e.sunset,description:e.weather[0].description,icon:e.weather.icon}},B="19ff8438588c08e35b65d23d6b3a0490",J="http://api.openweathermap.org/data/",q={getCurrentWeather:{byCoordinates:function(){var e=Object(M.a)(G.a.mark((function e(t,n){var c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"2.5/weather?lat=").concat(t,"&lon=").concat(n,"&appid=").concat(B,"&units=metric"));case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),byCity:function(){var e=Object(M.a)(G.a.mark((function e(t){var n;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"2.5/weather?q=").concat(t,"&appid=").concat(B,"&units=metric"));case 2:if((n=e.sent).ok){e.next=5;break}throw new Error(n.statusText);case 5:return e.abrupt("return",n.json());case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},getForecastWeather:{byCoordinates:function(){var e=Object(M.a)(G.a.mark((function e(t,n){var c;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(J,"2.5/onecall?lat=").concat(t,"&lon=").concat(n,"&appid=").concat(B,"&units=metric"));case 2:if((c=e.sent).ok){e.next=5;break}throw new Error(c.statusText);case 5:return e.abrupt("return",c.json());case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}},V=function(e){return{type:h,payload:e}},K=function(e){return{type:f,payload:e}},Q=function(e){return{type:y,payload:e}},U=function(){var e=Object(o.b)(),t=Object(o.c)(W),n=Object(o.c)(H),c=a.a.useState(""),r=Object(k.a)(c,2),i=r[0],s=r[1],u=function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(t){return e((n={latitude:t.coords.latitude,longitude:t.coords.longitude},{type:b,payload:n}));var n}))};return{error:n,loading:t,cityInput:i,geolocationHandler:function(){u()},cityInputHandler:function(e){s(e.target.value)},citySearchHandler:function(){var t;s(""),e((t=i,function(){var e=Object(M.a)(G.a.mark((function e(n){var c,r,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n(K(!0)),n(Q(null)),e.next=5,q.getCurrentWeather.byCity(t);case 5:if(c=e.sent){e.next=8;break}throw new Error(c);case 8:r=P(c),n(V(r)),n(K(!1)),e.next=18;break;case 13:e.prev=13,e.t0=e.catch(0),a=""===t?"Please, enter city name":"City ".concat(t," not found"),n(Q(a)),n(K(!1));case 18:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}()))}}},X=n(252),Z=n(67),$=n(257),ee=(n(158),X.a.Search),te=function(){var e=U(),t=e.error,n=e.loading,r=e.cityInput,a=e.geolocationHandler,i=e.cityInputHandler,s=e.citySearchHandler;return Object(c.jsxs)("div",{className:"geolocation_form",children:[Object(c.jsxs)("div",{className:"geolocation_form__inputs",children:[Object(c.jsx)(ee,{placeholder:"Type city name",enterButton:"Search",size:"large",value:r,loading:n,onChange:i,onSearch:s,className:"geolocation_form__search-bar"}),Object(c.jsx)(Z.a,{onClick:a,type:"primary",size:"large",className:"geolocation_form__current-btn",children:"Get current location"})]}),t&&Object(c.jsx)($.a,{message:t,type:"error",closable:!0})]})},ne=function(){var e=Object(o.b)(),t=Object(o.c)(I),n=Object(o.c)(L),c=Object(o.c)(W);return a.a.useEffect((function(){var n,c;t&&e((n=t.latitude,c=t.longitude,function(){var e=Object(M.a)(G.a.mark((function e(t){var r,a;return G.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(K(!0)),t(Q(null)),e.next=5,q.getCurrentWeather.byCoordinates(n,c);case 5:if(r=e.sent){e.next=8;break}throw new Error(r);case 8:a=P(r),console.log(r),t(V(a)),t(K(!1)),e.next=18;break;case 14:e.prev=14,e.t0=e.catch(0),t(Q(e.t0.message)),t(K(!1));case 18:case"end":return e.stop()}}),e,null,[[0,14]])})));return function(t){return e.apply(this,arguments)}}()))}),[t,e]),{cityList:n,loading:c}},ce=n(258),re=n(259),ae=n(251),ie=n(255),se=(n(202),n(253)),oe=a.a.memo((function(e){var t=e.city,n=Object(o.b)();console.log("render "+t.city);return Object(c.jsx)(se.a,{in:!0,timeout:1e3,classNames:"city-priview-item__transition",unmountOnExit:!0,appear:!0,children:Object(c.jsxs)("div",{className:"city-priview-item",children:[Object(c.jsxs)("div",{className:"city-priview-item__header",children:[Object(c.jsx)("h3",{children:t.city}),Object(c.jsx)(Ee,{onClick:function(){var e;n((e=t.city,{type:O,payload:e}))}})]}),Object(c.jsxs)(ce.a,{align:"middle",justify:"center",className:"city-priview-item__content",children:[Object(c.jsx)(re.a,{span:3,children:Object(c.jsx)(ae.a,{width:40,src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png")})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Temperature",value:"".concat(t.temp),suffix:"\u2103"})}),Object(c.jsx)(re.a,{span:10,children:Object(c.jsx)(ie.a,{title:"Description",value:t.description})}),Object(c.jsx)(re.a,{span:3,children:Object(c.jsx)(u.b,{to:"/".concat(t.city.toLowerCase()),children:"More info"})})]})]})})})),ue=n(68),le=n.p+"static/media/empty.d6ef4d19.png",je=function(){var e=ne(),t=e.cityList,n=e.loading;if(0===t.length)return n?Object(c.jsx)(pe,{}):Object(c.jsx)(ue.a,{description:"No cities",image:le});var r=t.map((function(e){return Object(c.jsx)(oe,{city:e},e.city)}));return Object(c.jsxs)("div",{children:[n?Object(c.jsx)(pe,{}):null,r]})},de=n(248),pe=(n(229),function(){return Object(c.jsx)("div",{className:"spinner",children:Object(c.jsx)(de.a,{})})}),be=n(256),he=function(e){return["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"][new Date(1e3*e).getDay()]},Oe=function(e){var t=new Date(1e3*e);return"".concat(ye(t.getHours()),":").concat(ye(t.getMinutes()))},fe=function(e){var t=new Date(1e3*e);return"".concat(ye(t.getDate()),".").concat(ye(t.getMonth()+1),".").concat(t.getFullYear())},ye=function(e){return e<10?"0"+e:String(e)},xe=(n(231),function(e){var t=e.city;return Object(c.jsx)(se.a,{in:!0,timeout:1e3,classNames:"current-weather__transition",unmountOnExit:!0,appear:!0,children:Object(c.jsxs)("div",{className:"current-weather",children:[Object(c.jsx)("div",{className:"current-weather__header",children:Object(c.jsxs)("h3",{children:[t.city," - Current Weather"]})}),Object(c.jsxs)("div",{className:"current-weather__content",children:[Object(c.jsx)(ae.a,{width:40,src:"http://openweathermap.org/img/wn/".concat(t.icon,"@2x.png"),className:"current-weather__icon"}),Object(c.jsxs)(be.a,{className:"current-weather__info",children:[Object(c.jsx)(be.a.Item,{label:"Description",children:t.description}),Object(c.jsxs)(be.a.Item,{label:"Temperature",children:[t.temp," \u2103"]}),Object(c.jsxs)(be.a.Item,{label:"Pressure",children:[t.pressure," mm"]}),Object(c.jsxs)(be.a.Item,{label:"Humidity",children:[t.humidity,"%"]}),Object(c.jsx)(be.a.Item,{label:"Sunrise",children:Oe(t.sunrise)}),Object(c.jsx)(be.a.Item,{label:"Sunset",children:Oe(t.sunset)}),Object(c.jsxs)(be.a.Item,{label:"Wind speed",children:[t.windSpeed," m/s"]})]})]})]})})}),me=n(250),ve=function(e){var t=e.forecast;return Object(c.jsxs)("div",{children:[Object(c.jsxs)(ce.a,{children:[Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Date",value:fe(t.day)})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Description",value:t.description})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Temperature",value:"".concat(t.temp," \u2103")})})]}),Object(c.jsxs)(ce.a,{children:[Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Pressure",value:"".concat(t.pressure," mm")})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Humidity",value:"".concat(t.humidity,"%")})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Wind Speed",value:"".concat(t.windSpeed," m/s")})})]}),Object(c.jsxs)(ce.a,{children:[Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Sunrise",value:Oe(t.sunrise)})}),Object(c.jsx)(re.a,{span:8,children:Object(c.jsx)(ie.a,{title:"Sunset",value:Oe(t.sunset)})})]})]})},ge=(n(232),me.a.TabPane),we=function(){var e=Object(o.c)(A),t=Object(o.c)(Y),n=e&&e.map((function(e){return Object(c.jsx)(ge,{tab:he(e.day),children:Object(c.jsx)(ve,{forecast:e})},e.day)}));return n?Object(c.jsx)(se.a,{in:!0,timeout:1e3,classNames:"forecast__transition",unmountOnExit:!0,appear:!0,children:Object(c.jsxs)("div",{className:"forecast",children:[Object(c.jsx)("h3",{className:"forecast__header",children:"Week Forecast"}),Object(c.jsx)(me.a,{className:"forecast__tabs",children:n})]})}):t?Object(c.jsx)(pe,{}):Object(c.jsx)("div",{children:"not found"})},_e=n(254),Ee=(n(237),function(e){var t=e.onClick;return Object(c.jsx)("div",{className:"close-icon",onClick:t,children:Object(c.jsx)(_e.a,{})})}),Te=function(){return Object(c.jsxs)("div",{children:[Object(c.jsx)(te,{}),Object(c.jsx)(je,{})]})},Ce=n(249),Ne=function(e){return{type:v,payload:e}},Se=function(e){return{type:g,payload:e}},ke=function(e){return{type:w,payload:e}},Ie=function(){var e=Object(N.f)().cityName,t=Object(o.b)(),n=Object(o.c)(D),c=Object(o.c)(R);return a.a.useEffect((function(){t(function(e){return function(){var t=Object(M.a)(G.a.mark((function t(n){var c,r;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(Se(!0)),t.next=4,q.getCurrentWeather.byCity(e);case 4:if(c=t.sent){t.next=7;break}throw new Error(c);case 7:r=P(c),n({type:m,payload:r}),n(Se(!1)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message),n(Se(!1));case 16:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(e))}),[t,e]),a.a.useEffect((function(){var e,c;n&&t((e=n.lat,c=n.lon,function(){var t=Object(M.a)(G.a.mark((function t(n){var r,a;return G.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,n(ke(!0)),t.next=4,q.getForecastWeather.byCoordinates(e,c);case 4:if(r=t.sent){t.next=7;break}throw new Error(r);case 7:a=r.daily.filter((function(e,t){return 0!==t})).map((function(e){return z(e)})),n(Ne(a)),n(ke(!1)),t.next=17;break;case 12:t.prev=12,t.t0=t.catch(0),console.log(t.t0.message),n(Ne([])),n(ke(!1));case 17:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()))}),[t,n]),{city:n,loading:c}},Le=function(){var e=Ie(),t=e.city,n=e.loading,r=t?Object(c.jsxs)(c.Fragment,{children:[Object(c.jsx)(xe,{city:t}),Object(c.jsx)(we,{})]}):Object(c.jsx)(ue.a,{description:"City not found",image:le});return n?Object(c.jsx)(pe,{}):Object(c.jsxs)("div",{children:[Object(c.jsx)(Ce.a,{children:Object(c.jsx)(Ce.a.Item,{children:Object(c.jsx)(u.b,{to:"/",children:"\u2190 Home"})})}),r]})};var We=function(){return Object(c.jsx)("div",{className:"app",children:Object(c.jsx)(S,{children:Object(c.jsxs)(N.c,{children:[Object(c.jsx)(N.a,{path:"/",component:Te,exact:!0}),Object(c.jsx)(N.a,{path:"/:cityName",component:Le})]})})})};s.a.render(Object(c.jsx)(u.a,{children:Object(c.jsx)(o.a,{store:C,children:Object(c.jsx)(We,{})})}),document.getElementById("root"))}},[[246,1,2]]]);
//# sourceMappingURL=main.5acdac94.chunk.js.map